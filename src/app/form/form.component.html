<div class="container bg-light p-5 border border-dark">
  <form
    class="mx-auto my-5 form"
    [formGroup]="doccumentForm"
    (ngSubmit)="onSubmit()"
  >
    <div *ngIf="formSubmitted && !error" class="text-center text-success my-5">
      <h1>Thank you for your submission!</h1>
      <h2>Please proceed to the next form.</h2>
    </div>
    <div *ngIf="!formSubmitted">
      <div class="row my-3 justify-content-center">
        <!-- name -->
        <div class="form-group my-3 col-lg-5 col-md-12">
          <label for="name">Name *</label>
          <input
            type="text"
            id="name"
            formControlName="name"
            class="form-control"
          />
          <span
            *ngIf="
              !doccumentForm.get('name')?.valid &&
              doccumentForm.get('name')?.touched
            "
            class="help-block text-danger"
            >Please enter your name</span
          >
        </div>
        <!-- id number -->
        <div class="form-group my-3 col-lg-5 col-md-12">
          <label for="dodId">DoD ID# *</label>
          <input
            type="number"
            id="dodId"
            formControlName="dodId"
            class="form-control"
          />
          <span
            *ngIf="
              !doccumentForm.get('dodId')?.valid &&
              doccumentForm.get('dodId')?.touched
            "
            class="help-block text-danger"
            >Please enter your ID number</span
          >
        </div>

        <!-- email -->
        <div class="col-lg-5 my-3 col-md-12">
          <label for="email">Email *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
          />
          <span
            *ngIf="
              !doccumentForm.get('email')?.valid &&
              doccumentForm.get('email')?.touched
            "
            class="help-block text-danger"
            >Please enter a valid email address</span
          >
        </div>
        <!-- select -->
        <div class="col-lg-5 my-3 col-md-12">
          <label for="Branch">Branch of service *</label>
          <select
            id="branch"
            formControlName="branch"
            class="form-control form-select"
          >
            <option value="Navy">Navy</option>
            <option value="Army">Army</option>
            <option value="Marines">Marines</option>
            <option value="Air Force">Air Force</option>
          </select>
          <span
            *ngIf="
              !doccumentForm.get('branch')?.valid &&
              doccumentForm.get('branch')?.touched
            "
            class="help-block text-danger"
            >Please select your branch of service</span
          >
        </div>
        <!-- radio -->
        <div class="radio col-md-10" *ngFor="let gender of genders">
          <label class="">
            <input
              class="mx-2"
              type="radio"
              formControlName="gender"
              [value]="gender"
            />{{ gender }}
          </label>
        </div>
        <!-- checkbox -->
        <div class="form-check my-3 col-9">
          <label for="active">
            Active duty
            <input
              class="form-check-input"
              type="checkbox"
              value="true"
              id="mishap"
              formControlName="active"
            />
          </label>
        </div>
        <!-- text area -->
        <div class="my-3 col-md-10">
          <label for="description">Description *</label>
          <textarea
            type="text"
            id="description"
            formControlName="description"
            class="form-control"
          ></textarea>
          <span
            *ngIf="
              !doccumentForm.get('description')?.valid &&
              doccumentForm.get('description')?.touched
            "
            class="help-block text-danger"
            >Please enter a description</span
          >
        </div>
        <!-- switch -->
        <div class="form-check col-9 form-switch">
          <label class="form-check-label" for="mishap"
            >Did a mishap occur?</label
          >
          <input
            class="form-check-input form-control-md"
            type="checkbox"
            id="mishap"
            formControlName="mishap"
          />

          <div *ngIf="doccumentForm.value.mishap === true">
            <div class="my-3 col-md-10">
              <label for="mishapDescription">Mishap Description</label>
              <textarea
                type="text"
                id="mishapDescription"
                formControlName="mishapDescription"
                class="form-control my-1"
              ></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="!error" class="d-grid gap-2 col-6 mx-auto">
      <button
        type="submit"
        *ngIf="!formSubmitted"
        [ngClass]="{ disabled: !doccumentForm.valid }"
        class="btn btn-primary"
      >
        Submit
      </button>
      <a
        routerLink="/second-form"
        *ngIf="formSubmitted"
        class="btn btn-success"
      >
        Next Form
      </a>
    </div>
    <div class="fs-4 text-center alert alert-danger mt-5" *ngIf="error">
      <span class="fs-3"
        >There was an error fetching submissions. Please refresh the page to try
        again. <br />
        Error Message:</span
      >
      {{ error }}
    </div>
  </form>
</div>
